import{a as r,t as ee,R as d}from"./app-CnyH-ig2.js";import{b as G,n as y,O as me,K as V,y as ne,A as x,o as $,x as pe,m as be,e as ge,R as Ee,i as P,L as re,f as Ce,c as te,s as $e,p as Re,u as le}from"./open-closed-ebLv1oGF.js";function Te(){let e=typeof document>"u";return"useSyncExternalStore"in ee?(n=>n.useSyncExternalStore)(ee)(()=>()=>{},()=>!1,()=>!e):!1}function ie(){let e=Te(),[n,t]=r.useState(G.isHandoffComplete);return n&&G.isHandoffComplete===!1&&t(!1),r.useEffect(()=>{n!==!0&&t(!0)},[n]),r.useEffect(()=>G.handoff(),[]),e?!1:n}function we(){let e=r.useRef(!1);return y(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function ue(e){var n;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||((n=e.as)!=null?n:ae)!==r.Fragment||d.Children.count(e.children)===1}let j=r.createContext(null);j.displayName="TransitionContext";var Se=(e=>(e.Visible="visible",e.Hidden="hidden",e))(Se||{});function xe(){let e=r.useContext(j);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function Fe(){let e=r.useContext(z);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let z=r.createContext(null);z.displayName="NestingContext";function D(e){return"children"in e?D(e.children):e.current.filter(({el:n})=>n.current!==null).filter(({state:n})=>n==="visible").length>0}function se(e,n){let t=$e(e),a=r.useRef([]),R=we(),F=Re(),h=$((u,l=x.Hidden)=>{let s=a.current.findIndex(({el:i})=>i===u);s!==-1&&(le(l,{[x.Unmount](){a.current.splice(s,1)},[x.Hidden](){a.current[s].state="hidden"}}),F.microTask(()=>{var i;!D(a)&&R.current&&((i=t.current)==null||i.call(t))}))}),T=$(u=>{let l=a.current.find(({el:s})=>s===u);return l?l.state!=="visible"&&(l.state="visible"):a.current.push({el:u,state:"visible"}),()=>h(u,x.Unmount)}),p=r.useRef([]),f=r.useRef(Promise.resolve()),v=r.useRef({enter:[],leave:[]}),b=$((u,l,s)=>{p.current.splice(0),n&&(n.chains.current[l]=n.chains.current[l].filter(([i])=>i!==u)),n==null||n.chains.current[l].push([u,new Promise(i=>{p.current.push(i)})]),n==null||n.chains.current[l].push([u,new Promise(i=>{Promise.all(v.current[l].map(([w,H])=>H)).then(()=>i())})]),l==="enter"?f.current=f.current.then(()=>n==null?void 0:n.wait.current).then(()=>s(l)):s(l)}),g=$((u,l,s)=>{Promise.all(v.current[l].splice(0).map(([i,w])=>w)).then(()=>{var i;(i=p.current.shift())==null||i()}).then(()=>s(l))});return r.useMemo(()=>({children:a,register:T,unregister:h,onStart:b,onStop:g,wait:f,chains:v}),[T,h,a,b,g,v,f])}let ae=r.Fragment,oe=me.RenderStrategy;function Pe(e,n){var t,a;let{transition:R=!0,beforeEnter:F,afterEnter:h,beforeLeave:T,afterLeave:p,enter:f,enterFrom:v,enterTo:b,entered:g,leave:u,leaveFrom:l,leaveTo:s,...i}=e,[w,H]=r.useState(null),o=r.useRef(null),E=ue(e),S=ne(...E?[o,n,H]:n===null?[]:[n]),W=(t=i.unmount)==null||t?x.Unmount:x.Hidden,{show:m,appear:X,initial:Y}=xe(),[C,I]=r.useState(m?"visible":"hidden"),Z=Fe(),{register:A,unregister:N}=Z;y(()=>A(o),[A,o]),y(()=>{if(W===x.Hidden&&o.current){if(m&&C!=="visible"){I("visible");return}return le(C,{hidden:()=>N(o),visible:()=>A(o)})}},[C,o,A,N,m,W]);let K=ie();y(()=>{if(E&&K&&C==="visible"&&o.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[o,C,K,E]);let fe=Y&&!X,q=X&&m&&Y,k=r.useRef(!1),M=se(()=>{k.current||(I("hidden"),N(o))},Z),J=$(B=>{k.current=!0;let U=B?"enter":"leave";M.onStart(o,U,O=>{O==="enter"?F==null||F():O==="leave"&&(T==null||T())})}),_=$(B=>{let U=B?"enter":"leave";k.current=!1,M.onStop(o,U,O=>{O==="enter"?h==null||h():O==="leave"&&(p==null||p())}),U==="leave"&&!D(M)&&(I("hidden"),N(o))});r.useEffect(()=>{E&&R||(J(m),_(m))},[m,E,R]);let de=!(!R||!E||!K||fe),[,c]=pe(de,w,m,{start:J,end:_}),he=be({ref:S,className:((a=ge(i.className,q&&f,q&&v,c.enter&&f,c.enter&&c.closed&&v,c.enter&&!c.closed&&b,c.leave&&u,c.leave&&!c.closed&&l,c.leave&&c.closed&&s,!c.transition&&m&&g))==null?void 0:a.trim())||void 0,...Ee(c)}),L=0;C==="visible"&&(L|=P.Open),C==="hidden"&&(L|=P.Closed),c.enter&&(L|=P.Opening),c.leave&&(L|=P.Closing);let ve=re();return d.createElement(z.Provider,{value:M},d.createElement(Ce,{value:L},ve({ourProps:he,theirProps:i,defaultTag:ae,features:oe,visible:C==="visible",name:"Transition.Child"})))}function ye(e,n){let{show:t,appear:a=!1,unmount:R=!0,...F}=e,h=r.useRef(null),T=ue(e),p=ne(...T?[h,n]:n===null?[]:[n]);ie();let f=te();if(t===void 0&&f!==null&&(t=(f&P.Open)===P.Open),t===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[v,b]=r.useState(t?"visible":"hidden"),g=se(()=>{t||b("hidden")}),[u,l]=r.useState(!0),s=r.useRef([t]);y(()=>{u!==!1&&s.current[s.current.length-1]!==t&&(s.current.push(t),l(!1))},[s,t]);let i=r.useMemo(()=>({show:t,appear:a,initial:u}),[t,a,u]);y(()=>{t?b("visible"):!D(g)&&h.current!==null&&b("hidden")},[t,g]);let w={unmount:R},H=$(()=>{var S;u&&l(!1),(S=e.beforeEnter)==null||S.call(e)}),o=$(()=>{var S;u&&l(!1),(S=e.beforeLeave)==null||S.call(e)}),E=re();return d.createElement(z.Provider,{value:g},d.createElement(j.Provider,{value:i},E({ourProps:{...w,as:r.Fragment,children:d.createElement(ce,{ref:p,...w,...F,beforeEnter:H,beforeLeave:o})},theirProps:{},defaultTag:r.Fragment,features:oe,visible:v==="visible",name:"Transition"})))}function He(e,n){let t=r.useContext(j)!==null,a=te()!==null;return d.createElement(d.Fragment,null,!t&&a?d.createElement(Q,{ref:n,...e}):d.createElement(ce,{ref:n,...e}))}let Q=V(ye),ce=V(Pe),Le=V(He),Ne=Object.assign(Q,{Child:Le,Root:Q});export{Le as F,we as f,ie as l,Ne as z};
